<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MLD - Forms</title>

  <link href="/assets/styles/salesforce-lightning-design-system.min.css" rel="stylesheet">
  <link href="styles/style.css" rel="stylesheet">
</head>
<body>

<div id="app">

</div>

<script src="mithril.js"></script>
<script src="bundle.js"></script>
<script src="faker.min.js"></script>
<script src="is.min.js"></script>
<script src="helpers.js"></script>
<script src="validator.js"></script>
<script src="vanilla-masker.min.js"></script>

<script>
  var radioItens = [
    {
      label: "One",
      value: "radio-one"
    },
    {
      label: "Two",
      value: "radio-two"
    },
    {
      label: "Three",
      value: "radio-three"
    },
    {
      label: "Four",
      value: "radio-four"
    }
  ];
  var formElementsHorizontal = [
    mlds.form.input({
      label: "Label1",
      input: {
        placeholder: "Placeholder Label1",
        name: "label1",
        oncreate: function (vnode) {
          VMasker(vnode.dom).maskPattern("(99) 9999-9999")
        }
      }
    }),
    mlds.form.input({
      label: "Label2",
      input: {
        placeholder: "Placeholder Label2",
        name: "label2"
      }
    }),
    mlds.form.input({
      label: "Label3",
      input: {
        placeholder: "Placeholder Label3",
        name: "label3"
      }
    }),
    mlds.form.input({
      label: "Label4",
      input: {
        placeholder: "Placeholder Label4",
        name: "label4"
      }
    }),
    mlds.form.checkbox({
      label: "Is checked",
      name: "checkboxTest",
      checkbox: {
        name: "checkebox"
      }
    }),
    mlds.form.radioGroup({
      label: "Radio Group label: ",
      name: "radio",
      required: true,
      itens: radioItens
    })
  ];
  var formElementsStacked = [
    mlds.form.input({
      label: "Label1",
      input: {
        placeholder: "Placeholder Label1",
        name: "s_label1",
      }
    }),
    mlds.form.input({
      label: "Label2",
      input: {
        placeholder: "Placeholder Label2",
        name: "s_label2"
      }
    }),
    mlds.form.input({
      label: "Label3",
      input: {
        placeholder: "Placeholder Label3",
        name: "s_label3"
      }
    }),
    mlds.form.input({
      label: "Label4",
      input: {
        placeholder: "Placeholder Label4",
        name: "s_label4"
      }
    }),
    mlds.form.checkbox({
      label: "Is checked",
      name: "checkboxTest",
      checkbox: {
        name: "s_checkebox"
      }
    }),
    mlds.form.radioGroup({
      label: "Radio Group label: ",
      name: "s_radio",
      itens: radioItens
    })
  ];
  var formElementsCompound = [
        {
          legend: "One",
          elements: [
            [
              mlds.form.input({
              label: "Label1",
              input: {
                placeholder: "Placeholder Label1",
                name: "s_label1"
              },
              wrapper: {
                class: "slds-size--1-of-2"
              }
            }),
              mlds.form.input({
              label: "Label2",
              input: {
                placeholder: "Placeholder Label2",
                name: "s_label2"
              },
              wrapper: {
                class: "slds-size--1-of-2"
              }
            })
            ]
          ]
        },
        {
          legend: "Two",
          elements: [
            [
              mlds.form.input({
                label: "Label3",
                input: {
                  placeholder: "Placeholder Label3",
                  name: "s_label4"
                },
                wrapper: {
                  class: "slds-size--1-of-1"
                }
              }),
              mlds.form.input({
                label: "Label4",
                input: {
                  placeholder: "Placeholder Label4",
                  name: "s_label5"
                },
               wrapper: {
                 class: "slds-size--1-of-3"
               }
              }),
            ],
            [
              mlds.form.input({
                label: "Label1",
                input: {
                  placeholder: "Placeholder Label1",
                  name: "s_label1"
                },
                wrapper: {
                  class: "slds-size--1-of-2"
                }
              }),
              mlds.form.input({
                label: "Label1",
                input: {
                  placeholder: "Placeholder Label1",
                  name: "s_label1"
                },
                wrapper: {
                  class: "slds-size--1-of-2"
                }
              }),
              mlds.form.input({
                label: "Label2",
                input: {
                  placeholder: "Placeholder Label2",
                  name: "s_label2"
                },
                wrapper: {
                  class: "slds-size--1-of-2"
                }
              })
            ],
            [
              mlds.form.input({
                label: "Label1",
                input: {
                  placeholder: "Placeholder Label1",
                  name: "s_label1"
                },
                wrapper: {
                  class: "slds-size--1-of-2"
                }
              }),
              mlds.form.input({
                label: "Label2",
                input: {
                  placeholder: "Placeholder Label2",
                  name: "s_label2"
                },
                wrapper: {
                  class: "slds-size--1-of-2"
                }
              }),
              mlds.form.input({
                label: "Label1",
                input: {
                  placeholder: "Placeholder Label1",
                  name: "s_label1"
                },
                wrapper: {
                  class: "slds-size--1-of-2"
                }
              }),
              mlds.form.input({
                label: "Label2",
                input: {
                  placeholder: "Placeholder Label2",
                  name: "s_label2"
                },
                wrapper: {
                  class: "slds-size--1-of-2"
                }
              })
            ]
          ]
        }
      ];

  var formDataHorizontal = m.prop({
    label1: m.prop(""),
    label2: m.prop(""),
    label3: m.prop(""),
    label4: m.prop(""),
    checkebox: m.prop(false),
    radio: m.prop("")
  });
  var formDataStacked = {
    s_label1: m.prop(""),
    s_label2: m.prop(""),
    s_label3: m.prop(""),
    s_label4: m.prop(""),
    s_checkebox: m.prop(false),
    s_radio: m.prop("")
  };
  var formDataCompound = {
    s_label1: m.prop(""),
    s_label2: m.prop(""),
    s_label3: m.prop(""),
    s_label4: m.prop(""),
    s_label5: m.prop(""),
    s_label6: m.prop(""),
  };

  var validateForm = new Validator({
    label1: function (value) {
      if (!is.equal(value, "a")) {
        return "Should be a"
      }
    },
    label2: function (value) {
      if (!is.equal(value, "b")) {
        return "Should be b"
      }
    },
    label3: function (value) {
      if (is.empty(value)) {
        return "Should not be empty"
      }
    },
    label4: function (value) {
      if (is.empty(value)) {
        return "Should not be empty"
      }
    },
    checkebox: function (value) {
      return is.equal(value, false)
    },
    radio: function (value) {
      if (is.empty(value)) {
        return "Should not be empty"
      }
    }
  });




  m.mount(document.getElementById("app"), {

    view: function () {


      validateForm.validate(formDataHorizontal);

      console.log(validateForm.errors)
      return m(".navigation"),
              m("main", [
                m(".masthead", [
                  m("h1.", "Forms"),
                ]),
                m(".content", [
                  m("section", [
                    m("h2.slds-m-bottom--medium.desc", "Horizontal"),
                    m(mlds.form.wrapper.horizontal, mlds.form.bindsData(formDataHorizontal()), formElementsHorizontal)
                  ]),
                  m("ol", [
                    Object.keys(formDataHorizontal()).map(function (key) {
                      return m("li", key + ": ", formDataHorizontal()[key]())
                    })
                  ]),
                  m("p", validateForm.hasErrors()),
                  m("hr"),
                  m("section", [
                    m("h2.slds-m-bottom--medium.desc", "Stacked Form"),
                    m(mlds.form.wrapper.stacked, mlds.form.bindsData(formDataStacked), formElementsStacked)
                  ]),
                  m("ol", [
                    Object.keys(formDataStacked).map(function (key) {
                      return m("li", key + ": ", formDataStacked[key]())
                    })
                  ]),
                  m("hr"),
                  m("section", [
                    m("h2.slds-m-bottom--medium.desc", "Compound Form"),
                    m("form", [
                      m(mlds.form.wrapper.compound, mlds.form.bindsData(formDataStacked),formElementsCompound)])
                  ])
                ])
              ])
    }
  });

</script>

</body>
</html>