<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MLD - Form Add</title>

  <link href="/assets/styles/salesforce-lightning-design-system.min.css" rel="stylesheet">
  <link href="styles/style.css" rel="stylesheet">
</head>
<body>

<div id="app">

</div>

<script src="mithril.js"></script>
<script src="bundle.js"></script>
<script src="faker.min.js"></script>
<script src="helpers.js"></script>

<script>

  var inputTest = m.prop("Change label");

  var count = 0;

  var inputList = [];

  var add = function () {
    count += 1;
    var inputModel = {
      label: "Label: " + count,
      value: m.prop(""),
      placeholder: "Placeholder " + count,
      index: count
    };
    inputList.push(inputModel);
  };

  var remove = function (index) {
    inputList.splice(index, 1);
  };

  m.mount(document.getElementById("app"), {
    view: function () {

      console.log("redraw")
      return m(".navigation"),
              m("main", [
                m(".masthead", [
                  m("h1.", "Forms"),
                ]),
                m(".content", [
                  m("section", [
                    m("h2.slds-m-bottom--medium.desc", "Input"),
                    inputList.map(function (item) {
                      return [mlds.form.input({
                        label: "Label: " + item.label,
                        input: {
                          oninput: m.withAttr("value", item.value),
                          value: item.value(),
                          placeholder: "Some Placeholder"
                        }
                      }),
                        m(".slds-button.slds-button--destructive", {
                        onclick: remove.bind(null, item.count)
                      }, "Remove")]
                    }), m("br"),
                    m(".slds-button.slds-button--neutral", {
                      onclick: add
                    }, "Add"),
                    m("hr"),
                    m("ul", [
                      inputList.map(function (item) {
                        return m("li", "Count " + item.index + ": " + item.value())
                      })
                    ])
                  ])
                ])
              ])
    }
  });

</script>

</body>
</html>