<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MLD - Modal</title>

  <link href="/assets/styles/salesforce-lightning-design-system.min.css" rel="stylesheet">
  <link href="styles/style.css" rel="stylesheet">
</head>
<body>

  <div id="app">
  </div>

  <script src="mithril.js"></script>
  <script src="bundle.js"></script>
  <script src="faker.min.js"></script>
  <script src="helpers.js"></script>

  <script>

    var radioItens = [
      {
        label: "One",
        value: "radio-one"
      },
      {
        label: "Two",
        value: "radio-two"
      },
      {
        label: "Three",
        value: "radio-three"
      },
      {
        label: "Four",
        value: "radio-four"
      }
    ];
    var formElementsHorizontal = [
      mlds.form.input({
        label: "Label1",
        input: {
          placeholder: "Placeholder Label1",
          name: "label1",
        }
      }),
      mlds.form.input({
        label: "Label2",
        input: {
          placeholder: "Placeholder Label2",
          name: "label2"
        }
      }),
      mlds.form.input({
        label: "Label3",
        input: {
          placeholder: "Placeholder Label3",
          name: "label3"
        }
      }),
      mlds.form.input({
        label: "Label4",
        input: {
          placeholder: "Placeholder Label4",
          name: "label4"
        }
      }),
      mlds.form.checkbox({
        label: "Is checked",
        name: "checkboxTest",
        checkbox: {
          name: "checkebox"
        }
      }),
      mlds.form.radioGroup({
        label: "Radio Group label: ",
        name: "radio",
        itens: radioItens
      })
    ];
    var formDataHorizontal = {
      label1: m.prop(""),
      label2: m.prop(""),
      label3: m.prop(""),
      label4: m.prop(""),
      checkebox: m.prop(false),
      radio: m.prop("")
    };


    var lookupData = [
      {
        "description": "Vandervoort Avenue",
        "name": "Limozen",
        "href": "57d88125365a185fc0259aa2"
      },
      {
        "description": "Crown Street",
        "name": "Nurplex",
        "href": "57d881252f28b431a3a2d43b"
      },
      {
        "description": "Banner Avenue",
        "name": "Equitax",
        "href": "57d881254d0e3aa39c43440a"
      },
      {
        "description": "Varet Street",
        "name": "Zaphire",
        "href": "57d88125bc03230f0ffb1340"
      },
      {
        "description": "Cherry Street",
        "name": "Xiix",
        "href": "57d88125d2a464ec65e06e13"
      },
      {
        "description": "Hanson Place",
        "name": "Columella",
        "href": "57d881256f43bf4c51c1669d"
      },
      {
        "description": "Amherst Street",
        "name": "Automon",
        "href": "57d881255533ec4e695e9fe7"
      },
      {
        "description": "Norman Avenue",
        "name": "Sustenza",
        "href": "57d881258d35fa142ab4180b"
      },
      {
        "description": "Commercial Street",
        "name": "Digitalus",
        "href": "57d88125f84493f7986896bd"
      },
      {
        "description": "Lloyd Court",
        "name": "Applideck",
        "href": "57d881259962ab12c16eee04"
      }
    ];
    var lookupSelected = m.prop(false);
    var searchTerm = m.prop("");


    m.mount(document.getElementById("app"), {
      view: function () {
        console.log(searchTerm())
        return [m(".navigation"),
          m("main", [
            m(".masthead", [
              m("h1.", "Modals"),
              m("p", "Modals are used to display content in a layer above the app." +
                      "This paradigm is used in cases such as the creation or editing of a record, " +
                      "as well as various types of messaging and wizards.")
            ]),
            m(".content", [
              m("section", [
                m("h2.slds-m-bottom--medium.desc", "Basic modal"),
                m("p"),
                m("button.slds-button.slds-button--brand", {
                  onclick: function () {
                    mlds.modal.show({
                      header: m("h2.slds-text-heading--medium", "Basic"),
                      content: m(mlds.form.wrapper.horizontal,
                              mlds.form.bindsData(formDataHorizontal),
                              formElementsHorizontal)
                      ,
                      footer:  m("button.slds-button.slds-button--brand", {
                        onclick: mlds.modal.close.bind(null, "modal-test--1")
                      }, "Save")
                    }, "modal-test--1")
                  }
                }, "Open Modal"),
              ]),
              m('hr'),
              m("section", [
                m("h2.slds-m-bottom--medium.desc", "Header empty"),
                m("button.slds-button.slds-button--brand", {
                  onclick: function () {
                    mlds.modal.show({
                      content: m(mlds.lookups, {
                        label: "Lookups Company",
                        placeholder: "Search companies",
                        query: searchTerm,
                        searchOninput: m.withAttr("value", searchTerm),
                        value: lookupSelected,
                        filter: function (item) {
                          return item.name.toLowerCase().indexOf(searchTerm) > -1 || item.description.toLowerCase().indexOf(searchTerm) > -1 ;
                        },
                        data: {
                          list: lookupData,
                          key: "href"
                        }
                      })
                    }, "modal-test--2")
                  }
                }, "Open Modal"),
              ]),
              m('hr'),
              m("section", [
                m("h2.slds-m-bottom--medium.desc", "Footer removed"),
                m("button.slds-button.slds-button--brand", {
                  onclick: function () {
                    mlds.modal.show({
                      header: m("h2.slds-text-heading--medium", "Modal Header"),
                      content: faker.lorem.paragraph()
                    }, "modal-test--3")
                  }
                }, "Open Modal"),
              ])
            ])
          ]),
        ]
      }
    });
  </script>

</body>
</html>